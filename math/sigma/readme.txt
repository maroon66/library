*これは何？
条件式対応Σ計算機です
Σ計算という作業ゲーを自動化するためのものです

*使い方
まずはmakeします(ocamlが必要)
できあがったsigma.exeを実行
入出力は標準入出力を使用
計算したい式を入力してEOF送ると計算して出力します

*文法
四則演算と累乗ができます
例: x+y, x-y, xy, x/2, x^2, 2x, (x+1)y
割り算と累乗は定数でないといけません
×: 2^x, x/y
使える変数はアルファベット1文字orアルファベット１文字+数字のみ
○: N, x2, a10
×: hoge, x2y

[条件式]で条件が真の時1、そうでないとき0となる関数を表します
使える条件式は線形不等式と線形合同式のみ
合同式はd|XでXがdで割り切れるを表し、dは定数でないといけません
,で区切って列挙したり、&&や||も使えます
○: [1<=x], [s<=x<=t], [x,y<N], [2x+3y>=5N], [z=x+y], [2|x+y], [2|x&&(3|x||3|2x+1)]
×: [xy<=N], [x|y], [3|x^2]

$xでxが整数全体を動くときの和を表します
無限は扱えないので、後ろに適切な条件式を指定してあげてください
○: $x[1<=x<=N]x, $x$y[1<=x,y][x+y<=N]
×: $x[x<=N]x-$x[x<=0]x

最後に@条件式をつけることで、自由変数の制約を示すことができ、出力がすっきりするかもしれません
ここでの条件式には&&は使えますが||は使えません
○: @N>=1, @1<=x<=N&&2|x
×: @3|x||2|x+1

*例
1からNまでの和
$x[1<=x<=N]x@N>=1
15乗まで対応してます
$x[1<=x<=N]x^15@N>=1
Nまでの数のうち、2,3,5と互いに疎なものの個数(大変な事になります)
$x[1<=x<=N](1-[2|x||3|x||5|x])@N>=1

*オプション
何も指定せずに実行すると、入力と同じ文法の式が出力されます
オプションを指定することで出力形式が変わります
-s: 入力と同じ形式で出力(デフォルト)
-l: Java用にlongで出力
-m: Java用にlongで適度にmodとって出力
-b: Java用にBigIntegerで出力
-h: ホーナー則使って式をまとめる(-l,-m,-bと組み合わせて使う)
longとかおわってるという人はソースコードてきとーにいじるとlong longになります

*バグ
例外処理とかめんどくさいので変な入力入れると理由は告げずにアサート落ちします
条件式中の係数が大きいと項数が爆発して停止しない場合があります
多倍長計算は行っていないので、オーバーフローすることもあります
バグが見つかったらTwitterとかでてきとーに知らせてください
